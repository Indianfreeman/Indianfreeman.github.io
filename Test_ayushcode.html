<!DOCTYPE html>
<html>

<head>
    <title>Filter</title>
    
    <script type="text/javascript" src="https://public.tableau.com/javascripts/api/tableau-2.min.js"></script>
	<script type="text/javascript" src="https://www.amcharts.com/lib/3/amcharts.js"></script>
		<script type="text/javascript" src="https://www.amcharts.com/lib/3/gauge.js"></script>


    <script type="text/javascript">
        var viz1,viz2,field;
		var glob_value;
 
		function initViz() {
			var containerDiv1 = document.getElementById("vizContainer1");
		
			
			url1 = "https://public.tableau.com/shared/H4C3JHY46?:display_count=yes";
			
			options = {
			hideTabs: true
			};
 
			viz1 = new tableau.Viz(containerDiv1, url1, options);
			glob_value = viz1.getWorkbook().getActiveSheet().getFiltersAsync().then(
			function(filter){
			field = filter[0].getFieldName();
			filtersArray = filter[0].getAppliedValues();})

				
		}
 
		//window.setInterval(filtersearch2, 1000);
		function filtersearch2(){
			sheet1 = viz1.getWorkbook().getActiveSheet();//.getWorksheets().get("Table");
			//sheet2 = viz2.getWorkbook().getActiveSheet().getWorksheets().get("Line");
			
			var filtersArray=[];
			sheet1.getFiltersAsync().then(
			function(filter){
			field = filter[0].getFieldName();
			filtersArray = filter[0].getAppliedValues();
			console.log(field);
console.log("I'm working");			
			console.log(filtersArray[0]);
			//sheet2.clearFilterAsync(field);
			//for(var i=0;i<filtersArray.length;i++){
				//if(i==0){
					//sheet2.applyFilterAsync(field,filtersArray[i].value,'REPLACE');
				//} else{
				//	sheet2.applyFilterAsync(field,filtersArray[i].value,'ADD');
				//}
			//}
		});
}


		
   
	
		<!-- amCharts javascript code -->
		
			AmCharts.makeChart("chartdiv",
				{
					"type": "gauge",
					"theme": "default",
					"arrows": [
						{
							"id": "GaugeArrow-1",
							"value": glob_value
				
						}
					],
					"axes": [
						{
							"bottomText": "0 km/h",
							"bottomTextYOffset": -20,
							"endValue": 220,
							"id": "GaugeAxis-1",
							"valueInterval": 10,
							"bands": [
								{
									"color": "#00CC00",
									"endValue": 90,
									"id": "GaugeBand-1",
									"startValue": 0
								},
								{
									"color": "#ffac29",
									"endValue": 130,
									"id": "GaugeBand-2",
									"startValue": 90
								},
								{
									"color": "#ea3838",
									"endValue": 220,
									"id": "GaugeBand-3",
									"innerRadius": "95%",
									"startValue": 130
								}
							]
						}
					],
					"allLabels": [],
					"balloon": {},
					"titles": [
						{
							"id": "Title-1",
							"size": 15,
							"text": "Speedometer"
						}
					]
				}
			);
		</script>
</head>

<body onload="initViz();">
<div id="chartdiv" style="width: 100%; height: 300px; background-color: #FFFFFF;" ></div>
    <button id="getData" onclick="filtersearch2()" class="btn">Apply Filter</button>
	
	<div id="vizContainer1" style="width:800px; height:700px;"></div>

	
</body>

</html>
